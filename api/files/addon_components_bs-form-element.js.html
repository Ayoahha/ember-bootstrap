<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>addon/components/bs-form-element.js - ember-bootstrap</title>
    <!--<link rel="stylesheet" href="../assets/css/main.css" id="site_styles">-->
    <!--<link rel="stylesheet" href="../assets/css/custom.css">-->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//kaliber5.github.io/ember-bootstrap/stylesheets/kaliber5.css">
    <script type="text/javascript" src="//use.typekit.net/dkq5epu.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="shortcut icon" href="//kaliber5.github.io/ember-bootstrap/favicon.ico">
</head>
<body class="yui3-skin-sam">
<div class="navbar navbar-inverse navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <div class="navbar-toggle-wrapper visible-xs">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".js-navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <a href="/ember-bootstrap/" class="navbar-brand">ember-bootstrap</a>
        </div>
        <div class="collapse navbar-collapse js-navbar-collapse">
            <ul class="navbar-nav nav">
                <li><a href="/ember-bootstrap/getting-started">Getting Started</a></li>
                <li><a href="/ember-bootstrap/components">Components</a></li>
                <li><a href="/ember-bootstrap/api">API</a></li>

            </ul>
            <ul class="navbar-nav nav navbar-right">
                <li><a href="https://github.com/kaliber5/ember-bootstrap" target="_blank"><i class="fa fa-github"></i></a></li>

            </ul>
        </div>
    </div>
</div>
<div class="container">
    <h1>API Docs <span class="small">0.1.2.e86630bc</span></h1>
    <div class="row">
        <div class="col-sm-8">
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<div class="page-header">
    <h1>addon/components/bs-form-element.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums">
import Ember from &#x27;ember&#x27;;
import FormGroup from &#x27;ember-bootstrap/components/bs-form-group&#x27;;
import Form from &#x27;ember-bootstrap/components/bs-form&#x27;;
import I18nSupport from &#x27;ember-bootstrap/mixins/i18n-support&#x27;;


var nonTextFieldControlTypes = Ember.A([
    &#x27;checkbox&#x27;,
    &#x27;select&#x27;,
    &#x27;select2&#x27;,
    &#x27;textarea&#x27;
]);

/**
 Sub class of &#x60;Components.FormGroup&#x60; that adds automatic form layout markup and form validation features.

 ### Form layout

 The appropriate Bootstrap markup for the given &#x60;formLayout&#x60; and &#x60;controlType&#x60; is automatically generated to easily
 create forms without coding the default Bootstrap form markup by hand:

 &#x60;&#x60;&#x60;hbs
 \{{#bs-form formLayout=&quot;horizontal&quot; action=&quot;submit&quot;}}
   \{{bs-form-element controlType=&quot;email&quot; label=&quot;Email&quot; placeholder=&quot;Email&quot; value=email}}
   \{{bs-form-element controlType=&quot;password&quot; label=&quot;Password&quot; placeholder=&quot;Password&quot; value=password}}
   \{{bs-form-element controlType=&quot;checkbox&quot; label=&quot;Remember me&quot; value=rememberMe}}
   \{{bs-button defaultText=&quot;Submit&quot; type=&quot;primary&quot; buttonType=&quot;submit&quot;}}
 \{{/bs-form}}
 &#x60;&#x60;&#x60;

 ### Form validation

 In the following example the control elements of the three form elements value will be bound to the properties
 (given by &#x60;property&#x60;) of the form&#x27;s &#x60;model&#x60;, which in this case is its controller (see &#x60;model=this&#x60;):

 &#x60;&#x60;&#x60;hbs
 \{{#bs-form formLayout=&quot;horizontal&quot; model=this action=&quot;submit&quot;}}
   \{{bs-form-element controlType=&quot;email&quot; label=&quot;Email&quot; placeholder=&quot;Email&quot; property=&quot;email&quot;}}
   \{{bs-form-element controlType=&quot;password&quot; label=&quot;Password&quot; placeholder=&quot;Password&quot; property=&quot;password&quot;}}
   \{{bs-form-element controlType=&quot;checkbox&quot; label=&quot;Remember me&quot; property=&quot;rememberMe&quot;}}
   \{{bs-button defaultText=&quot;Submit&quot; type=&quot;primary&quot; buttonType=&quot;submit&quot;}}
 \{{/bs-form}}
 &#x60;&#x60;&#x60;

 By using this indirection in comparison to directly binding the &#x60;value&#x60; property, you get the benefit of automatic
 form validation, given that your &#x60;model&#x60; is implementing [ember-validations](https://github.com/dockyard/ember-validations).

 In the example above the &#x60;model&#x60; was our controller itself, so the control elements were bound to the appropriate
 properties of our controller. A controller implementing validations on those properties could look like this:

 &#x60;&#x60;&#x60;js
 import Ember from &#x27;ember&#x27;;
 import EmberValidations from &#x27;ember-validations&#x27;;

 export default Ember.Controller.extend(EmberValidations.Mixin,{
   email: null,
   password: null,
   rememberMe: false,
   validations: {
     email: {
       presence: true,
       format: {
         with: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/
       }
     },
     password: {
       presence: true,
       length: { minimum: 6, maximum: 10}
     },
     comments: {
       length: { minimum: 5, maximum: 20}
     }
   }
 });
 &#x60;&#x60;&#x60;

 If the &#x60;showValidation&#x60; property is &#x60;true&#x60; (which is automatically the case if a &#x60;focusOut&#x60; event is captured from the
 control element or the containing &#x60;Components.Form&#x60; was submitted with its &#x60;model&#x60; failing validation) and there are
 validation errors for the &#x60;model&#x60;&#x27;s &#x60;property&#x60;, the appropriate Bootstrap validation markup (see
 http://getbootstrap.com/css/#forms-control-validation) is applied:

 * &#x60;validation&#x60; is set to &#x27;error&#x27;, which will set the &#x60;has-error&#x60; CSS class
 * the &#x60;errorIcon&#x60; feedback icon is displayed if &#x60;controlType&#x60; is a text field
 * the validation messages are displayed as Bootstrap &#x60;help-block&#x60;s

 As soon as the validation is successful again...

 * &#x60;validation&#x60; is set to &#x27;success&#x27;, which will set the &#x60;has-success&#x60; CSS class
 * the &#x60;successIcon&#x60; feedback icon is displayed if &#x60;controlType&#x60; is a text field
 * the validation messages are removed

 ### I18n support

 Supports translateable properties if [ember-i18n](https://github.com/jamesarosen/ember-i18n) is present.
 See {{#crossLink &quot;Mixins.I18nSupport&quot;}}{{/crossLink}}


 @class FormElement
 @namespace Components
 @extends Components.FormGroup
 @uses Mixins.I18nSupport
 */
export default FormGroup.extend(I18nSupport, {
    /**
     * Text to display within a &#x60;&lt;label&gt;&#x60; tag.
     *
     * @property label
     * @type string
     * @public
     */
    label: null,

    /**
     * The type of the control widget.
     * Supported types:
     *
     * * &#x27;text&#x27;
     * * &#x27;checkbox&#x27;
     * * &#x27;select&#x27;
     * * &#x27;select2&#x27; (needs [ember-select-2](https://github.com/iStefo/ember-select-2))
     * * &#x27;textarea&#x27;
     * * any other type will use an input tag with the &#x60;controlType&#x60; value as the type attribute (for e.g. HTML5 input
     * types like &#x27;email&#x27;), and the same layout as the &#x27;text&#x27; type
     *
     * @property controlType
     * @type string
     * @public
     */
    controlType: &#x27;text&#x27;,

    /**
     * The value of the control element is bound to this property. You can bind it to some controller property to
     * get/set the control element&#x27;s value:
     *
     * &#x60;&#x60;&#x60;hbs
     * {{bs-form-element controlType=&quot;email&quot; label=&quot;Email&quot; placeholder=&quot;Email&quot; value=email}}
     * &#x60;&#x60;&#x60;
     *
     * Note: you loose the ability to validate this form element by directly binding to its value. It is recommended
     * to use the &#x60;property&#x60; feature instead.
     *
     *
     * @property value
     * @public
     */
    value: null,

    /**
     The property name of the form element&#x27;s &#x60;model&#x60; (by default the &#x60;model&#x60; of its parent &#x60;Components.Form&#x60;) that this
     form element should represent. The control element&#x27;s value will automatically be bound to the model property&#x27;s
     value.

     Using this property enables form validation on this element.

     @property property
     @type string
     @public
     */
    property: null,

    /**
     * Control element&#x27;s HTML5 placeholder attribute
     *
     * @property placeholder
     * @type string
     * @public
     */
    placeholder: null,

    /**
     * Control element&#x27;s name attribute
     *
     * @property name
     * @type string
     * @public
     */
    name: null,

    /**
     * An array of objects containing the selection of choices for multiple choice style form controls, e.g. select
     * boxes.
     *
     * &#x60;&#x60;&#x60;hbs
     * {{bs-form-element controlType=&quot;select&quot; choices=countries choiceLabelProperty=&quot;name&quot; choiceValueProperty=&quot;id&quot; label=&quot;Country&quot; value=selectedCountry}}
     * &#x60;&#x60;&#x60;
     *
     * Be sure to also set the &#x60;choiceValueProperty&#x60; and &#x60;choiceLabelProperty&#x60; properties.
     *
     * @property choices
     * @type array
     * @public
     */
    choices: Ember.A(),

    /**
     * The property of the &#x60;choices&#x60; array of objects, containing the value of the choice, e.g. the select box option.
     *
     * @property choiceValueProperty
     * @type string
     * @public
     */
    choiceValueProperty: null,

    /**
     * The property of the &#x60;choices&#x60; array of objects, containing the label of the choice, e.g. the select box option.
     *
     * @property choiceLabelProperty
     * @type string
     * @public
     */
    choiceLabelProperty: null,

    /**
     * Textarea&#x27;s rows attribute (ignored for other &#x60;controlType&#x60;s)
     *
     * @property rows
     * @type integer
     * @default 5
     * @public
     */
    rows: 5,

    /**
     * Textarea&#x27;s cols attribute (ignored for other &#x60;controlType&#x60;s)
     *
     * @property cols
     * @type integer
     * @public
     */
    cols: null,

    /**
     * &#x60;choiceValueProperty&#x60; prefixed with &#x27;content.&#x27; for &#x27;select&#x27; &#x60;controlType&#x60;
     *
     * @property selectValueProperty
     * @type string
     * @readonly
     * @private
     */
    selectValueProperty: Ember.computed(&#x27;choiceValueProperty&#x27;, function(){
        var valuePath = this.get(&#x27;choiceValueProperty&#x27;);
        if (Ember.isPresent(valuePath)) {
            return valuePath.match(/^content\..*/) ? valuePath : &#x27;content.&#x27; + valuePath;
        }
    }),

    /**
     * &#x60;choiceLabelProperty&#x60; prefixed with &#x27;content.&#x27; for &#x27;select&#x27; &#x60;controlType&#x60;
     *
     * @property selectLabelProperty
     * @type string
     * @readonly
     * @private
     */
    selectLabelProperty: Ember.computed(&#x27;choiceLabelProperty&#x27;, function(){
        var labelPath = this.get(&#x27;choiceLabelProperty&#x27;);
        if (Ember.isPresent(labelPath)) {
            return labelPath.match(/^content\..*/) ? labelPath : &#x27;content.&#x27; + labelPath;
        }
    }),

    /**
     * The model used for validation. Defaults to the parent &#x60;Components.Form&#x60;&#x27;s &#x60;model&#x60;
     *
     * @property model
     * @public
     */
    model: Ember.computed.alias(&#x27;form.model&#x27;),

    /**
     * The array of error messages from the &#x60;model&#x60;&#x27;s validation.
     *
     * @property errors
     * @type array
     * @protected
     */
    errors: null,

    /**
     * @property hasErrors
     * @type boolean
     * @readonly
     * @protected
     */
    hasErrors: Ember.computed.gt(&#x27;errors.length&#x27;,0),

    /**
     * @property hasValidator
     * @type boolean
     * @readonly
     * @protected
     */
    hasValidator: Ember.computed.notEmpty(&#x27;model.validate&#x27;),

    /**
     * If &#x60;true&#x60; form validation markup is rendered (requires a validatable &#x60;model&#x60;).
     *
     * @property showValidation
     * @type boolean
     * @default false
     * @public
     */
    showValidation: false,

    /**
     * @property showErrors
     * @type boolean
     * @readonly
     * @protected
     */
    showErrors: Ember.computed.and(&#x27;showValidation&#x27;,&#x27;hasErrors&#x27;),

    /**
     * The validation (&quot;error&quot; or &quot;success&quot;) or null if no validation is to be shown. Automatically computed from the
     * models validation state.
     *
     * @property validation
     * @readonly
     * @type string
     * @protected
     */
    validation: Ember.computed(&#x27;hasErrors&#x27;,&#x27;hasValidator&#x27;,&#x27;showValidation&#x27;,function(){
        if (!this.get(&#x27;showValidation&#x27;) || !this.get(&#x27;hasValidator&#x27;)) {
            return null;
        }
        return this.get(&#x27;hasErrors&#x27;) ? &#x27;error&#x27; : &#x27;success&#x27;;
    }),

    /**
     * @property hasLabel
     * @type boolean
     * @readonly
     * @protected
     */
    hasLabel: Ember.computed.notEmpty(&#x27;label&#x27;),

    /**
     * True for text field &#x60;controlType&#x60;s
     *
     * @property useIcons
     * @type boolean
     * @readonly
     * @public
     */
    useIcons: Ember.computed(&#x27;controlType&#x27;, function() {
        return !nonTextFieldControlTypes.contains(this.get(&#x27;controlType&#x27;));
    }),

    /**
     * The form layout used for the markup generation (see http://getbootstrap.com/css/#forms):
     *
     * * &#x27;horizontal&#x27;
     * * &#x27;vertical&#x27;
     * * &#x27;inline&#x27;
     *
     * Defaults to the parent &#x60;form&#x60;&#x27;s &#x60;formLayout&#x60; property.
     *
     * @property formLayout
     * @type string
     * @public
     */
    formLayout: Ember.computed.alias(&#x27;form.formLayout&#x27;),

    /**
     * @property isVertical
     * @type boolean
     * @readonly
     * @protected
     */
    isVertical: Ember.computed.equal(&#x27;formLayout&#x27;,&#x27;vertical&#x27;),

    /**
     * @property isHorizontal
     * @type boolean
     * @readonly
     * @protected
     */
    isHorizontal: Ember.computed.equal(&#x27;formLayout&#x27;,&#x27;horizontal&#x27;),

    /**
     * @property isInline
     * @type boolean
     * @readonly
     * @protected
     */
    isInline: Ember.computed.equal(&#x27;formLayout&#x27;,&#x27;inline&#x27;),

    /**
     * The Bootstrap grid class for form labels within a horizontal layout form. Defaults to the value of the same
     * property of the parent form. The corresponding grid class for form controls is automatically computed.
     *
     * @property horizontalLabelGridClass
     * @type string
     * @default &#x27;col-md-4&#x27;
     * @public
     */
    horizontalLabelGridClass: Ember.computed.oneWay(&#x27;form.horizontalLabelGridClass&#x27;),

    /**
     * Computed property that specifies the Bootstrap grid class for form controls within a horizontal layout form.
     *
     * @property horizontalInputGridClass
     * @type string
     * @readonly
     * @protected
     */
    horizontalInputGridClass: Ember.computed(&#x27;horizontalLabelGridClass&#x27;, function() {
        var parts = this.get(&#x27;horizontalLabelGridClass&#x27;).split(&#x27;-&#x27;);
        Ember.assert(&#x27;horizontalInputGridClass must match format bootstrap grid column class&#x27;, parts.length===3);
        parts[2] = 12 - parts[2];
        return parts.join(&#x27;-&#x27;);
    }),

    /**
     * Computed property that specifies the Bootstrap offset grid class for form controls within a horizontal layout
     * form, that have no label.
     *
     * @property horizontalInputOffsetGridClass
     * @type string
     * @readonly
     * @protected
     */
    horizontalInputOffsetGridClass: Ember.computed(&#x27;horizontalLabelGridClass&#x27;, function() {
        var parts = this.get(&#x27;horizontalLabelGridClass&#x27;).split(&#x27;-&#x27;);
        parts.splice(2,0,&#x27;offset&#x27;);
        return parts.join(&#x27;-&#x27;);
    }),

    /**
     * Reference to the parent &#x60;Components.Form&#x60; class.
     *
     * @property form
     * @protected
     */
    form: Ember.computed(function(){
        return this.nearestOfType(Form);
    }),

    layoutName: Ember.computed(&#x27;formLayout&#x27;,&#x27;controlType&#x27;,function() {
        var formLayout = this.getWithDefault(&#x27;formLayout&#x27;,&#x27;vertical&#x27;),
            inputLayout,
            controlType = this.get(&#x27;controlType&#x27;);

        switch (true) {
            case nonTextFieldControlTypes.contains(controlType):
                inputLayout = controlType;
                break;
            default:
                inputLayout = &#x27;default&#x27;;
        }

        return &#x27;components/form-element/&#x27; + formLayout + &#x27;/&#x27; + inputLayout;
    }),

    _rerender: Ember.observer(&#x27;layoutName&#x27;, function() {
        this.rerender();
    }),

    /**
     * Listen for focusOut events from the control element to automatically set &#x60;showValidation&#x60; to true to enable
     * form validation markup rendering.
     *
     * @event focusOut
     */
    focusOut: function() {
        this.set(&#x27;showValidation&#x27;, true);
    },

    init: function() {
        this._super();
        if (!Ember.isBlank(this.get(&#x27;property&#x27;))) {
            Ember.Binding.from(&quot;model.&quot; + this.get(&#x27;property&#x27;)).to(&#x27;value&#x27;).connect(this);
            Ember.Binding.from(&quot;model.errors.&quot; + this.get(&#x27;property&#x27;)).to(&#x27;errors&#x27;).connect(this);
        }
    }
});
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <h3>Classes</h3>
            
            <ul id="api-classes" class="nav nav-pills nav-stacked">
                    <li><a href="../classes/Components.Alert.html">Components.Alert</a></li>
                    <li><a href="../classes/Components.Button.html">Components.Button</a></li>
                    <li><a href="../classes/Components.ButtonGroup.html">Components.ButtonGroup</a></li>
                    <li><a href="../classes/Components.Dropdown.html">Components.Dropdown</a></li>
                    <li><a href="../classes/Components.DropdownButton.html">Components.DropdownButton</a></li>
                    <li><a href="../classes/Components.DropdownMenu.html">Components.DropdownMenu</a></li>
                    <li><a href="../classes/Components.DropdownToggle.html">Components.DropdownToggle</a></li>
                    <li><a href="../classes/Components.Form.html">Components.Form</a></li>
                    <li><a href="../classes/Components.FormElement.html">Components.FormElement</a></li>
                    <li><a href="../classes/Components.FormGroup.html">Components.FormGroup</a></li>
                    <li><a href="../classes/Components.Input.html">Components.Input</a></li>
                    <li><a href="../classes/Components.Select.html">Components.Select</a></li>
                    <li><a href="../classes/Components.Textarea.html">Components.Textarea</a></li>
                    <li><a href="../classes/Mixins.DropdownToggle.html">Mixins.DropdownToggle</a></li>
                    <li><a href="../classes/Mixins.I18nSupport.html">Mixins.I18nSupport</a></li>
                    <li><a href="../classes/Mixins.SizeClass.html">Mixins.SizeClass</a></li>
                    <li><a href="../classes/Mixins.TypeClass.html">Mixins.TypeClass</a></li>
            </ul>        </div>
    </div>
</div>
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/yuidoc-bootstrap.js"></script>
<script>prettyPrint();</script>
</body>
</html>
